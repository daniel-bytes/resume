import os
env=Environment(CPPPATH='.',
                CPPDEFINES=[],
                LIBS=[],
                CXXFLAGS="-std=c++2a"
              )
                
if int(ARGUMENTS.get('test', 0)):
  files = Glob('tcp/*.cpp') + \
          Glob('http/*.cpp') + \
          Glob('html/*.cpp') + \
          Glob('app/*.cpp') + \
          Glob('test/html/*.cpp') + \
          Glob('test/test.cpp')
  program = env.Program("build/tests", files)
  env.NoClean(program)
else:
  files = Glob('tcp/*.cpp') + \
          Glob('http/*.cpp') + \
          Glob('html/*.cpp') + \
          Glob('app/*.cpp') + \
          Glob('main.cpp')
  program = env.Program("build/simple-serv", files)
  env.NoClean(program)
